(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"ct+p":function(t,o,e){"use strict";e.r(o),e.d(o,"HomePageModule",function(){return _});var n=e("ofXK"),i=e("TEn/"),r=e("3Pt+"),s=e("tyNb"),c=e("mrSG"),a=e("fXoL"),m=e("AytR"),b=e("tk/3");let d=(()=>{class t{constructor(t){this.http=t}getForm(t,o,e){return this.http.get(m.a+`b/dynamic_form_builder/dynamic_form_render/${t}/${o}/${e}?source=debtor_API`)}saveFormData(t,o,e,n){return this.http.post(m.a+`b/dynamic_form_builder/dynamic_form_render/${t}/${o}/${e}?source=debtor_API`,n)}}return t.\u0275fac=function(o){return new(o||t)(a.Pb(b.b))},t.\u0275prov=a.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=e("OlR4"),u=e("9JWQ");function l(t,o){1&t&&(a.Lb(0,"div"),a.Lb(1,"h1"),a.fc(2,"Dynamic Forms"),a.Kb(),a.Kb())}function g(t,o){if(1&t){const t=a.Mb();a.Lb(0,"div",7),a.Lb(1,"formio",8,9),a.Tb("render",function(o){return a.ac(t),a.Vb().onRender(o)})("change",function(o){return a.ac(t),a.Vb().onChange(o)})("nextPage",function(o){return a.ac(t),a.Vb().onNext(o)})("submit",function(o){return a.ac(t),a.Vb().onSubmit(o)}),a.Kb(),a.Kb()}if(2&t){const t=a.Vb();a.xb(1),a.Yb("form",t.jsonObject)("options",t.formConfig.options)}}const f=[{path:"",component:(()=>{class t{constructor(t,o,e,n,i){this.dynamicFormsService=t,this.alertCtrl=o,this.route=e,this.commonService=n,this.router=i}ngOnInit(){this.formConfig={options:{alerts:{submitMessage:"Thank you for submitting the form."},errors:{message:"Error while submitting the form. Please try again."}}}}ionViewWillEnter(){return Object(c.a)(this,void 0,void 0,function*(){this.route.queryParams.subscribe(t=>{t&&(this.form_slug=t.form_slug,this.case_id=t.case_id,this.debtor_id=t.debtor_id,localStorage.setItem("form_slug",this.form_slug),localStorage.setItem("case_id",this.case_id),localStorage.getItem("debtor_id")!=this.debtor_id?(localStorage.setItem("debtor_id",this.debtor_id),localStorage.setItem("remote_token",""),this.router.navigate(["/login"])):localStorage.setItem("debtor_id",this.debtor_id))}),localStorage.getItem("remote_token")?this.getForm():this.router.navigate(["/login"])})}getForm(){this.commonService.showLoader(),this.dynamicFormsService.getForm(this.form_slug,this.case_id,this.debtor_id).subscribe(t=>Object(c.a)(this,void 0,void 0,function*(){this.commonService.dismissLoader(),t.result?t.data.length>0&&this.setForm(t):this.commonService.showToast(t.message,"danger")}))}setForm(t){this.formObj=t.data[0],this.jsonString=t.data[0].content,this.jsonObject=JSON.parse(this.jsonString),"form"==this.jsonObject.display?this.jsonObject.components.forEach((t,o)=>{"htmlelement"==t.type&&(this.jsonObject.components[o].content=t.content.replace(/\\/g,""))}):"wizard"==this.jsonObject.display&&this.jsonObject.components.forEach((t,o)=>{t.components.forEach((t,e)=>{"htmlelement"==t.type&&(this.jsonObject.components[o].components[e].content=t.content.replace(/\\/g,""))})})}onRender(t){}onNext(t){}onChange(t){return Object(c.a)(this,void 0,void 0,function*(){})}onSubmit(t){return Object(c.a)(this,void 0,void 0,function*(){this.commonService.showLoader(),this.dynamicFormsService.saveFormData(this.form_slug,this.case_id,this.debtor_id,t.data).subscribe(t=>Object(c.a)(this,void 0,void 0,function*(){t.result?(this.jsonObject={},this.commonService.showToast("Form Submitted!")):(this.jsonObject={},this.commonService.showToast("Failed to Submit!","danger")),this.commonService.dismissLoader()}))})}confirmLogout(){return Object(c.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Confirm Logout!",message:"Are you sure you want to logout?",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Logout",handler:()=>{this.router.navigate(["/login"]),localStorage.setItem("remote_token","")}}]});yield t.present()})}}return t.\u0275fac=function(o){return new(o||t)(a.Ib(d),a.Ib(i.a),a.Ib(s.a),a.Ib(h.a),a.Ib(s.g))},t.\u0275cmp=a.Cb({type:t,selectors:[["app-home"]],decls:9,vars:2,consts:[["color","dark"],["slot","end"],[3,"click"],["size","large","name","log-out-outline"],[1,"ion-padding"],[4,"ngIf"],["class","formio-wrapper",4,"ngIf"],[1,"formio-wrapper"],[3,"form","options","render","change","nextPage","submit"],["formObj","","formObj",""]],template:function(t,o){1&t&&(a.Lb(0,"ion-toolbar",0),a.Lb(1,"ion-title"),a.fc(2,"Debtor App"),a.Kb(),a.Lb(3,"ion-buttons",1),a.Lb(4,"ion-button",2),a.Tb("click",function(){return o.confirmLogout()}),a.Jb(5,"ion-icon",3),a.Kb(),a.Kb(),a.Kb(),a.Lb(6,"ion-content",4),a.ec(7,l,3,0,"div",5),a.ec(8,g,4,2,"div",6),a.Kb()),2&t&&(a.xb(7),a.Yb("ngIf",!o.jsonObject),a.xb(1),a.Yb("ngIf",o.jsonObject))},directives:[i.o,i.n,i.d,i.c,i.g,i.e,n.i,u.a],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()}];let p=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(o){return new(o||t)},imports:[[s.i.forChild(f)],s.i]}),t})(),_=(()=>{class t{}return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(o){return new(o||t)},imports:[[n.b,r.d,i.p,u.b,p]]}),t})()}}]);